.page-heading
  .left-button
    .icon-button
      = link_to year_path(@semester.year) do
        %i.fa-solid.fa-arrow-left
  %h1= "#{@semester.year.name}/#{@semester.name}"
  .right-button.button-row
    .icon-button
      = link_to edit_semester_path(@semester) do
        %i.fa-solid.fa-pen-to-square

    %button#copy-share-link.icon-button{ type: 'button', title: 'Copy share link', 'data-clipboard-text' => share_semester_url(@semester.share_token) }
      %i.fa-solid.fa-share
    %span#copy-success{ style: 'display:none;' } Copied!

-# Stats
.stats-container 
  .stat 
    .stat-header Credits
    .stat-content= number_with_precision(@semester.credits, precision: 0)
  .stat 
    .stat-header Average Score
    .stat-content= number_with_precision(@semester.average_score(current_user), precision: 2) + '%'
  .stat 
    .stat-header Achieved Score
    .stat-content= number_with_precision(@semester.achieved_score(current_user), precision: 2) + '%'

- @uni_modules.each do |uni_module|
  .gt-card
    .card-heading
      %h2= uni_module.code + " - " + uni_module.name
      .icon-button
        = link_to uni_module do
          %i.fa-solid.fa-arrow-right
    .container-flex
      .row.font-secondary
        .col Credits
        .col Progress
        .col Achieved
      .row
        .col
          - if uni_module.credits.present?
            = number_with_precision(uni_module.credits, precision: 0)
          - else
            = "N/A"
        .col= "#{number_with_precision(uni_module.progress(current_user), precision: 0)}%"
        .col= "#{number_with_precision(uni_module.achieved_score(current_user), precision: 0)}%"
      .row
        .col.progress-bar.mx-12px
          - if uni_module.credits.present?
            .progress{style: "width: #{uni_module.credits.to_f / @semester.credits * 100}%"}
          - else
            .progress{style: "width: 0%"}
        .col.progress-bar.mx-12px
          .progress{style: "width: #{uni_module.progress(current_user)}%"}
        .col.progress-bar.mx-12px
          .progress{style: "width: #{uni_module.achieved_score(current_user)}%"}

= link_to '+ New Module', new_uni_module_path(semester_id: @semester.id), class: 'card-button'

-# Graph
.gt-card
  %h2 Your Time Spent
  .chart-container
    = line_chart @module_data, curve: false, legend: false, width: "100%" #, height:"100%"